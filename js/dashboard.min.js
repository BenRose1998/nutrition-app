function updateChartData(a,b){a.data.datasets[0].data=b,a.update()}function updateChartBorder(a,b="rgba(0, 0, 0, 0.1)",c=0){a.data.datasets[0].borderColor[0]=b,a.data.datasets[0].borderWidth[0]=c,a.update()}function updateCharts(){$.ajax({type:"GET",url:"api.php?type=getNutrition",headers:{},success:function(a){var b=Math.round;d=JSON.parse(a);var c=d.calorie_goal-b(d.calories);0>=c?(c=0,updateChartBorder(chart_calories,"#d62828",4)):updateChartBorder(chart_calories),updateChartData(chart_calories,[b(d.calories),c]),$("#calories-text").text("Calories ("+b(d.calories)+"/"+d.calorie_goal+")"),updateChartData(chart_nutrition,[b(d.protein),b(d.carbohydrates),b(d.fat),b(d.sugar),b(d.salt/1e3)]);var e=d.protein_goal-b(d.protein);0>=e?(e=0,updateChartBorder(chart_protein,"#d62828",4)):updateChartBorder(chart_protein),updateChartData(chart_protein,[b(d.protein),e]),$("#protein-text").text("Protein ("+b(d.protein)+"/"+d.protein_goal+"g)")}})}var calories=document.getElementById("calories").getContext("2d"),chart_calories=new Chart(calories,{type:"doughnut",data:{labels:["Calories eaten","Calories remaining"],datasets:[{label:"calories",data:[0,0],backgroundColor:["#00C301"],borderColor:["rgba(0, 0, 0, 0.1)"],borderWidth:[0]}]},options:{responsive:!0,legend:{display:!1},tooltips:{enabled:!1}}}),nutrition=document.getElementById("nutrition").getContext("2d"),chart_nutrition=new Chart(nutrition,{type:"pie",data:{labels:["Protein","Carbs","Fat","Sugar","Salt"],datasets:[{data:[0,0,0,0,0],backgroundColor:["#00C301","#4DED30","#00C301","#4DED30","#00C301"]}]},options:{responsive:!0,legend:{display:!0,position:"bottom"}}}),protein=document.getElementById("protein").getContext("2d"),chart_protein=new Chart(protein,{type:"doughnut",data:{labels:["Protein eaten"],datasets:[{label:"protein",data:[0,0],backgroundColor:["#00C301"],borderColor:["rgba(0, 0, 0, 0.1)"],borderWidth:[0]}]},options:{responsive:!0,legend:{display:!1},tooltips:{enabled:!1}}});updateCharts(),setInterval(updateCharts(),1e4);