var current_chart;function updateCurrentChart(){"nutrition"===current_chart?weeklyNutrition():"calories"===current_chart?weeklyCalories():"protein"===current_chart?weeklyProtein():void 0}function getDates(){let a=moment(),b=[a.date()];for(let c=0;5>=c;c++)a.subtract(1,"days"),b.push(a.date());return b.reverse()}function getLabels(){const a=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],b=new Date;let c=["Today"];for(let d=0;5>=d;d++)b.setDate(b.getDate()-1),c.push(a[b.getDay()]+" "+b.getDate());return c.reverse()}function weeklyCalories(){current_chart="calories",$.ajax({type:"GET",url:"api.php?type=weeklyCalories",dataType:"json",headers:{},success:function(a){0==a.length&&$("#graph-error").text("No Data");let b=getDates(),c=[];$.each(b,function(b,e){let d=0;$.each(a,function(a,b){b.food_added=moment(b.food_added),b.food_added.date()==e&&(d+=parseFloat(b.calories))}),c.push(parseFloat(d).toFixed(2))}),chart=new Chart(graph,{type:"bar",data:{labels:getLabels(),datasets:[{data:c,label:"Calories",backgroundColor:"#00c301",fill:!1}]},options:{maintainAspectRatio:!1}})}})}function weeklyProtein(){current_chart="protein",$.ajax({type:"GET",url:"api.php?type=weeklyProtein",dataType:"json",headers:{},success:function(a){0==a.length&&(console.log("failed"),$("#graph-error").text("No Data"));let b=getDates(),c=[];$.each(b,function(b,e){let d=0;$.each(a,function(a,b){b.food_added=moment(b.food_added),b.food_added.date()==e&&(d+=parseFloat(b.protein))}),c.push(parseFloat(d).toFixed(2))}),chart=new Chart(graph,{type:"bar",data:{labels:getLabels(),datasets:[{data:c,label:"Protein",backgroundColor:"#00c301",fill:!1}]},options:{maintainAspectRatio:!1}})}})}function weeklyNutrition(){current_chart="nutrition",$.ajax({type:"GET",url:"api.php?type=weeklyNutrition",dataType:"json",headers:{},success:function(a){0==a.length&&(console.log("failed"),$("#graph-error").text("No Data"));let b=getDates();const c=Object.keys(a[0]);c.pop();let d={};$.each(c,function(c,e){let f=[];$.each(b,function(b,c){let d=0;$.each(a,function(a,b){b.food_added=moment(b.food_added),b.food_added.date()==c&&("salt"==e?d+=parseFloat(b[e]/1e3):d+=parseFloat(b[e]))}),f.push(parseFloat(d).toFixed(2))}),d[e]=f}),chart=new Chart(graph,{type:"bar",data:{labels:getLabels(),datasets:[{data:d.carbohydrates,label:"Carbohydrates",backgroundColor:"#00C301",fill:!1},{data:d.protein,label:"Protein",backgroundColor:"#4DED30",fill:!1},{data:d.fat,label:"Fat",backgroundColor:"#00C301",fill:!1},{data:d.salt,label:"Salt",backgroundColor:"#4DED30",fill:!1},{data:d.sugar,label:"Sugar",backgroundColor:"#00C301",fill:!1}]},options:{maintainAspectRatio:!1}})}})}$(document).ready(function(){var a;weeklyNutrition(),current_chart="nutrition",$(".nav-tabs>.nav-item>.nav-link").on("click",function(b){switch(a&&a.destroy(),$("#graph-error").text(""),b.preventDefault(),$(".nav-tabs>.nav-item>.nav-link").each(function(){$(this).removeClass("active")}),$(this).addClass("active"),$(this).attr("href")){case"calories":weeklyCalories();break;case"protein":weeklyProtein();break;case"nutrition":weeklyNutrition();break;default:weeklyNutrition();}})});